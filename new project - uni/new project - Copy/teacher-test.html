<!DOCTYPE html>
<html>
<head>
    <title>Teacher Dashboard Test</title>
    <style>
        body { margin: 0; font-family: Arial; }
        .container { display: flex; }
        .sidebar { 
            width: 200px; 
            background: #2a2a2a; 
            padding: 20px; 
            min-height: 100vh;
            color: white;
        }
        .sidebar button {
            display: block;
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            background: #4a4a4a;
            color: white;
            border: none;
            cursor: pointer;
            text-align: left;
        }
        .sidebar button:hover {
            background: #6a6a6a;
        }
        .sidebar button.active {
            background: #00aa00;
            color: black;
        }
        .main {
            flex: 1;
            padding: 20px;
            background: #f5f5f5;
        }
        .tab {
            display: none;
            padding: 20px;
            background: white;
            border: 1px solid #ccc;
        }
        .tab.active {
            display: block;
        }
        .debug-log {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 300px;
            height: 200px;
            background: #000;
            color: #0f0;
            padding: 10px;
            font-size: 11px;
            overflow-y: auto;
            border: 2px solid #0f0;
            z-index: 9999;
        }
    </style>
</head>
<body>
    <div class="debug-log" id="debugLog"></div>
    
    <div class="container">
        <div class="sidebar">
            <h3>Navigation</h3>
            <button onclick="showTab('home')" class="nav-btn active">Home</button>
            <button onclick="showTab('classes')" class="nav-btn">Classes</button>
            <button onclick="showTab('marks')" class="nav-btn">Marks</button>
            <button onclick="showTab('logout')" class="nav-btn" style="background: #aa2222;">Logout</button>
        </div>
        
        <div class="main">
            <h1>Teacher Dashboard</h1>
            <p id="user-info">User: Loading...</p>
            
            <div id="home" class="tab active">
                <h2>üìä Dashboard Home</h2>
                <p>Welcome to your teacher dashboard!</p>
            </div>
            
            <div id="classes" class="tab">
                <h2>üìö My Classes</h2>
                <p>List of classes...</p>
            </div>
            
            <div id="marks" class="tab">
                <h2>üìù Marks</h2>
                <p>Student marks management...</p>
            </div>
        </div>
    </div>

    <script>
        const debugLog = document.getElementById('debugLog');
        const logs = [];
        
        function addLog(msg) {
            const timestamp = new Date().toLocaleTimeString();
            logs.push(`[${timestamp}] ${msg}`);
            if (logs.length > 20) logs.shift();
            debugLog.innerHTML = logs.join('<br>');
            debugLog.scrollTop = debugLog.scrollHeight;
            console.log(msg);
        }
        
        addLog('Page loaded');
        
        // Check user
        document.addEventListener('DOMContentLoaded', function() {
            addLog('DOMContentLoaded fired');
            const userStr = localStorage.getItem('universe_user');
            if (userStr) {
                const user = JSON.parse(userStr);
                addLog('User found: ' + user.name);
                document.getElementById('user-info').textContent = 'User: ' + user.name + ' (' + user.role + ')';
            } else {
                addLog('No user in localStorage!');
            }
        });
        
        // Tab switching function
        window.showTab = function(tabId) {
            addLog('showTab(' + tabId + ') called');
            
            // Hide all tabs
            const tabs = document.querySelectorAll('.tab');
            addLog('Found ' + tabs.length + ' tabs');
            tabs.forEach(tab => {
                tab.classList.remove('active');
                addLog('Hidden: ' + tab.id);
            });
            
            // Show selected tab
            const tab = document.getElementById(tabId);
            if (tab) {
                tab.classList.add('active');
                addLog('Showed: ' + tabId);
            } else {
                addLog('ERROR: Tab not found: ' + tabId);
            }
            
            // Update buttons
            const buttons = document.querySelectorAll('.nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.querySelector('button[onclick*="showTab(\'' + tabId + '\')"]');
            if (activeBtn) {
                activeBtn.classList.add('active');
                addLog('Activated button for: ' + tabId);
            }
        };
        
        window.logout = function() {
            addLog('Logout clicked');
            localStorage.removeItem('universe_user');
            window.location.href = 'index.html';
        };
        
        addLog('Functions exposed to window');
    </script>
</body>
</html>
